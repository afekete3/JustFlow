(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{187:function(e,t,n){e.exports=n(331)},259:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},296:function(e,t,n){},297:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){},327:function(e,t,n){},328:function(e,t,n){},329:function(e,t,n){},330:function(e,t,n){},331:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(29),o=n.n(s),i=n(17),c=n(154),l=n(16),u=n(9),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_SUCCESS":return Object(u.a)({},e,{user:t.user,fetchUserError:!1});case"FETCH_USER_ERROR":return Object(u.a)({},e,{fetchUserError:!0});default:return e}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOKEN":return Object(u.a)({},e,{token:t.token});default:return e}},m=n(174),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PLAYLIST_MENU_PENDING":return Object(u.a)({fetchPlaylistPending:!0},e);case"FETCH_PLAYLIST_MENU_SUCCESS":return Object(u.a)({playlists:t.playlists,fetchPlaylistError:!1,fetchPlaylistPending:!1},e);case"ADD_PLAYLIST_ITEM":return Object(u.a)({},e,{playlists:[].concat(Object(m.a)(e.playlists),[t.playlist])});case"FETCH_PLAYLIST_MENU_ERROR":return Object(u.a)({fetchPlaylistError:!0,fetchPlaylistPending:!1},e);case"REORDER_PLAYLIST_TRACK_PENDING":return{reorderPlaylistTrackPending:!0};case"REORDER_PLAYLIST_TRACK_SUCCESS":return Object(u.a)({},e,{reorderPlaylistTrackPending:!1,songs:t.songs});case"REORDER_PLAYLIST_TRACK_ERROR":return{reorderPlaylistTrackPending:!1,reorderPlaylistTrackError:!0};default:return e}},g={fetchSongsPending:!0,songPlaying:!1,timeElapsed:0,songId:0,viewType:"songs",songPaused:!0,selectedSongs:[]},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_VIEW_TYPE":return Object(u.a)({},e,{viewType:t.view});case"FETCH_SONGS_PENDING":return Object(u.a)({},e,{fetchSongsPending:!0});case"FETCH_SONGS_SUCCESS":return Object(u.a)({},e,{songs:t.songs,fetchSongsError:!1,fetchSongsPending:!1,viewType:"songs"});case"FETCH_SONGS_ERROR":return Object(u.a)({},e,{fetchSongsError:!0,fetchSongsPending:!1});case"SEARCH_SONGS_PENDING":return Object(u.a)({},e,{searchSongsPending:!0});case"SEARCH_SONGS_SUCCESS":return Object(u.a)({},e,{songs:t.songs,searchSongsError:!1,searchSongsPending:!1,viewType:"search"});case"SEARCH_SONGS_ERROR":return Object(u.a)({},e,{searchSongsError:!0,searchSongsPending:!1});case"FETCH_RECENTLY_PLAYED_PENDING":return Object(u.a)({},e,{fetchSongsPending:!0});case"FETCH_RECENTLY_PLAYED_SUCCESS":return Object(u.a)({},e,{songs:t.songs,viewType:"Recently Played",fetchSongsError:!1,fetchSongsPending:!1});case"FETCH_RECENTLY_PLAYED_ERROR":return Object(u.a)({},e,{fetchSongsError:!0,fetchSongsPending:!1});case"FETCH_PLAYLIST_SONGS_PENDING":return Object(u.a)({},e,{fetchPlaylistSongsPending:!0});case"FETCH_PLAYLIST_SONGS_SUCCESS":return Object(u.a)({},e,{songs:t.songs,viewType:"playlist",fetchPlaylistSongsError:!1,fetchPlaylistSongsPending:!1});case"FETCH_PLAYLIST_SONGS_ERROR":return Object(u.a)({},e,{fetchPlaylistSongsError:!0,fetchPlaylistSongsPending:!1});case"FETCH_ARTIST_SONGS_PENDING":return Object(u.a)({},e,{fetchArtistSongsPending:!0});case"FETCH_ARTIST_SONGS_SUCCESS":return Object(u.a)({},e,{songs:t.songs,viewType:"Artist",fetchArtistSongsError:!1,fetchArtistSongsPending:!1});case"FETCH_ARTIST_SONGS_ERROR":return Object(u.a)({},e,{fetchArtistSongsError:!0,fetchArtistSongsPending:!1});case"PLAY_SONG":return Object(u.a)({},e,{songPlaying:!0,songDetails:t.song,songId:t.song.id,timeElapsed:0,songPaused:!1});case"STOP_SONG":return Object(u.a)({},e,{songPlaying:!1,songDetails:null,timeElapsed:0,songPaused:!0});case"PAUSE_SONG":return Object(u.a)({},e,{songPaused:!0});case"RESUME_SONG":return Object(u.a)({},e,{songPaused:!1});case"INCREASE_SONG_TIME":return Object(u.a)({},e,{timeElapsed:t.time});case"SET_SELECTED_SONGS":return Object(u.a)({},e,{selectedSongs:t.selectedSongs});case"CLEAR_SONGS":return Object(u.a)({},e,{songs:t.songs});default:return e}},f={title:"Songs"},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_HEADER_TITLE":return Object(u.a)({},e,{title:t.title});default:return e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{volume:100},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_VOLUME":return{volume:t.volume};default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_PLAYER":return Object(u.a)({},e,{spotifyPlayer:t.spotifyPlayer});case"UPDATE_PLAYER_CURRENT_STATE":return Object(u.a)({},e,{currentPlayerState:t.currentPlayerState});case"PLAY_SPECIFIC_TRACK_ERROR":case"PLAY_SPECIFIC_TRACK_SUCCESS":return Object(u.a)({},e);default:return e}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_ORGANIZING_STATE":return Object(u.a)({},e,{isOrganizing:t.isOrganizing});default:return e}},_=Object(i.c)({userReducer:p,tokenReducer:d,playlistReducer:y,songsReducer:h,uiReducer:E,soundReducer:S,spotifyPlayerReducer:v,playlistOrganizeReducer:P}),k=n(156),O=n.n(k),T=n(19),R=n(20),b=n(21),N=n(22),C=n(23),j=n(7),A=n.n(j),w=function(e){return function(t){var n=new Request("https://api.spotify.com/v1/me",{headers:new Headers({Authorization:"Bearer "+e})});fetch(n).then((function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e.json()})).then((function(e){t({type:"FETCH_USER_SUCCESS",user:e})})).catch((function(e){t({type:"FETCH_USER_ERROR"})}))}},I=function(e){return{type:"SET_TOKEN",token:e}},L=function(e){return{type:"UPDATE_PLAYER",spotifyPlayer:e}},H=function(e){return{type:"UPDATE_PLAYER_CURRENT_STATE",currentPlayerState:e}},G=function(e,t,n,a){return function(r){console.log("-----------------------"),console.log(t),console.log(n),console.log(a),console.log("------------------------");var s=JSON.stringify({uris:t});void 0!==n?s=JSON.stringify({context_uri:a,offset:{uri:n}}):void 0!==a&&(s=JSON.stringify({context_uri:a}));var o=new Request("https://api.spotify.com/v1/me/player/play",{method:"PUT",headers:new Headers({Authorization:"Bearer "+e}),body:s});fetch(o).then((function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e.json()})).then((function(e){r({type:"PLAY_SPECIFIC_TRACK_SUCCESS"})})).catch((function(e){r({type:"PLAY_SPECIFIC_TRACK_ERROR"})}))}},U=n(63),D=n.n(U),z=function(e){return function(t){var n=new Request("https://api.spotify.com/v1/me/tracks?limit=50",{headers:new Headers({Authorization:"Bearer "+e})});t({type:"FETCH_SONGS_PENDING"}),fetch(n).then((function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e.json()})).then((function(e){D()(e.items,(function(e){return e.track.artists[0].name})).map((function(e){return e.track.artists[0].id})).join(",");t({type:"FETCH_SONGS_SUCCESS",songs:e.items})})).catch((function(e){t({type:"FETCH_SONGS_ERROR"})}))}},Y=function(e,t){return function(n){var a=new Request("https://api.spotify.com/v1/search?q=".concat(e,"&type=track"),{headers:new Headers({Authorization:"Bearer "+t,Accept:"application/json"})});n({type:"SEARCH_SONGS_PENDING"}),fetch(a).then((function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e.json()})).then((function(e){e.items=e.tracks.items.map((function(e){return{track:e}})),n({type:"SEARCH_SONGS_SUCCESS",songs:e.items})})).catch((function(e){n({type:"FETCH_SONGS_ERROR"})}))}},F=function(){return{type:"CLEAR_SONGS",songs:""}},x=function(e){return{type:"PLAY_SONG",song:e}},M=function(){return{type:"STOP_SONG"}},V=function(){return{type:"PAUSE_SONG"}},B=function(){return{type:"RESUME_SONG"}},K=function(e){return{type:"INCREASE_SONG_TIME",time:e}},q=function(e){return{type:"UPDATE_VIEW_TYPE",view:e}},J=function(e){return{type:"SET_SELECTED_SONGS",selectedSongs:e}},W=function(e){return{type:"UPDATE_HEADER_TITLE",title:e}},X=function(e){return{type:"UPDATE_VOLUME",volume:e}},Z=(n(259),n(157)),Q=n.n(Z),$=(n(261),function(e){var t=e.userImage,n=e.displayName;return r.a.createElement("div",{className:"user-details-container"},r.a.createElement("img",{alt:"user",className:"user-image",src:t}),r.a.createElement("p",{className:"user-name"},n))}),ee=Object(l.b)((function(e){return{displayName:e.userReducer.user?e.userReducer.user.display_name:"",userImage:e.userReducer.user&&e.userReducer.user.images[0]?e.userReducer.user.images[0].url:""}}))($),te=(n(262),function(){return r.a.createElement("div",{className:"header"},r.a.createElement(ee,null))}),ne=n(48),ae=n.n(ne),re=(n(263),n(49)),se=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(b.a)(this,Object(N.a)(t).call(this,e))).getSongIndex=function(){var e=n.props,t=e.songs,a=e.songDetails;return t.map((function(e,t){if(e.track===a)return t})).filter((function(e){return void 0!==e}))[0]},n.nextSong=function(){null!==n.props.spotifyPlayer&&void 0!==n.props.currentPlayerState&&n.props.currentPlayerState.track_window.next_tracks.length>0&&n.props.spotifyPlayer.nextTrack()},n.prevSong=function(){null!==n.props.spotifyPlayer&&void 0!==n.props.currentPlayerState&&n.props.currentPlayerState.track_window.previous_tracks.length>0&&n.props.spotifyPlayer.previousTrack()},n.toggleSong=function(){null!==n.props.spotifyPlayer&&(console.log(n.props.spotifyPlayer),n.props.spotifyPlayer.togglePlay())},n.state={spotifyPlayer:e.spotifyPlayer,timeElapsed:e.timeElapsed},n}return Object(C.a)(t,e),Object(R.a)(t,[{key:"componentWillMount",value:function(){this.calculateTime()}},{key:"calculateTime",value:function(){var e=this;console.log("creating interval",this.props.currentPlayerState);var t=setInterval((function(){void 0!==e.props.currentPlayerState&&(e.props.timeElapsed===e.props.currentPlayerState.duration/1e3?clearInterval(e.state.intervalId):e.props.currentPlayerState.paused||e.props.increaseSongTime(e.props.timeElapsed+1))}),1e3);this.setState({intervalId:t})}},{key:"render",value:function(){var e=this.props.currentPlayerState;return void 0!==e?r.a.createElement("div",{className:"song-player-container"},r.a.createElement("div",{className:"song-details"},r.a.createElement("p",{className:"song-name"},e.track_window.current_track.name),r.a.createElement("p",{className:"artist-name"},e.track_window.current_track.artists[0].name)),r.a.createElement("div",{className:"song-controls"},r.a.createElement("div",{onClick:this.prevSong,className:"reverse-song"},r.a.createElement(re.a,{name:"step backward",inverted:!0,color:"grey",link:!0})),!0===e.paused&&r.a.createElement("div",{className:"play-btn",onClick:this.toggleSong},r.a.createElement(re.a,{name:"play",inverted:!0,color:"grey",link:!0,size:"small"})),!1===e.paused&&r.a.createElement("div",{className:"play-btn",onClick:this.toggleSong},r.a.createElement(re.a,{name:"pause",inverted:!0,color:"grey",link:!0,size:"small"})),r.a.createElement("div",{onClick:this.nextSong,className:"next-song"},r.a.createElement(re.a,{name:"step forward",inverted:!0,color:"grey",link:!0}))),r.a.createElement("div",{className:"song-progress-container"},r.a.createElement("p",{className:"timer-start"},ae()().minutes(0).second(this.props.timeElapsed).format("m:ss")),r.a.createElement("div",{className:"song-progress"},r.a.createElement("div",{style:{width:this.props.timeElapsed/(e.duration/1e3)*500},className:"song-expired"})),r.a.createElement("p",{className:"timer-end"},ae()().minutes(0).second(e.duration/1e3).format("m:ss")))):r.a.createElement("div",{className:"song-player-container"},r.a.createElement("div",{className:"song-details"},r.a.createElement("p",{className:"song-name"},void 0!==e?e.track_window.current_track.name:""),r.a.createElement("p",{className:"artist-name"},void 0!==e?e.track_window.current_track.artists[0].name:"")),r.a.createElement("div",{className:"song-controls"},r.a.createElement("div",{onClick:this.prevSong,className:"reverse-song"},r.a.createElement(re.a,{name:"step backward",inverted:!0,color:"grey",link:!0})),r.a.createElement("div",{className:"play-btn",onClick:this.playSong},r.a.createElement(re.a,{name:"play",inverted:!0,color:"grey",link:!0,size:"small"})),r.a.createElement("div",{className:"play-btn",onClick:this.props.songPaused?this.props.resumeSong:this.props.pauseSong},r.a.createElement(re.a,{name:"pause",inverted:!0,color:"grey",link:!0,size:"small"})),r.a.createElement("div",{onClick:this.nextSong,className:"next-song"},r.a.createElement(re.a,{name:"step forward",inverted:!0,color:"grey",link:!0}))),r.a.createElement("div",{className:"song-progress-container"},r.a.createElement("p",{className:"timer-start"},ae()().minutes(0).second(this.props.timeElapsed).format("m:ss")),r.a.createElement("div",{className:"song-progress"},r.a.createElement("div",{style:{width:0},className:"song-expired"})),r.a.createElement("p",{className:"timer-end"},ae()().minutes(0).second(0).format("m:ss"))))}}]),t}(a.Component),oe=Object(l.b)((function(e){return{songName:e.songsReducer.songDetails?e.songsReducer.songDetails.name:"",artistName:e.songsReducer.songDetails?e.songsReducer.songDetails.artists[0].name:"",songPlaying:e.songsReducer.songPlaying,timeElapsed:e.songsReducer.timeElapsed,songPaused:e.songsReducer.songPaused,songDetails:e.songsReducer.songDetails,songs:e.songsReducer.songs,token:e.tokenReducer.token,spotifyPlayer:e.spotifyPlayerReducer.spotifyPlayer,currentPlayerState:e.spotifyPlayerReducer.currentPlayerState}}),(function(e){return Object(i.b)({increaseSongTime:K},e)}))(se),ie=(n(278),function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(b.a)(this,Object(N.a)(t).call(this,e))).updateVolume=function(e){n.setState({volume:e.target.value}),void 0!==n.props.spotifyPlayer&&(n.props.spotifyPlayer.setVolume(e.target.value/100),n.props.updateVolume(10*Math.ceil(e.target.value/10)))},n.state={volume:e.volume},n}return Object(C.a)(t,e),Object(R.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"volume-container"},r.a.createElement("i",{className:"fa fa-volume-up","aria-hidden":"true"}),r.a.createElement("input",{className:"volume",type:"range",min:0,max:100,value:this.props.volume,onChange:this.updateVolume}))}}]),t}(a.Component)),ce=Object(l.b)((function(e){return{volume:e.soundReducer.volume,spotifyPlayer:e.spotifyPlayerReducer.spotifyPlayer}}),(function(e){return Object(i.b)({updateVolume:X},e)}))(ie),le=(n(279),function(e){var t=e.stopSong,n=e.pauseSong,a=e.resumeSong,s=e.audioControl;return r.a.createElement("div",{className:"footer"},r.a.createElement(oe,{stopSong:t,pauseSong:n,resumeSong:a,audioControl:s}),r.a.createElement(ce,null))}),ue=(n(280),function(e){function t(){return Object(T.a)(this,t),Object(b.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(R.a)(t,[{key:"componentWillReceiveProps",value:function(e){""!==e.userId&&""!==e.token&&this.props.fetchPlaylistsMenu(e.userId,e.token)}},{key:"renderPlaylists",value:function(){var e=this;return this.props.playlists.map((function(t){return r.a.createElement("li",{onClick:function(){e.props.fetchPlaylistSongs(t.owner.id,t.id,e.props.token),e.props.updateHeaderTitle(t.name)},className:e.props.title===t.name?"active side-menu-item":"side-menu-item",key:t.id},t.name)}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"user-playlist-container"},r.a.createElement("h3",{className:"user-playlist-header"},"Playlists"),this.props.playlists&&this.renderPlaylists())}}]),t}(a.Component)),pe=function(e){return{type:"ADD_PLAYLIST_ITEM",playlist:e}},de=function(e,t){return function(n){var a=new Request("https://api.spotify.com/v1/users/".concat(e,"/playlists"),{headers:new Headers({Authorization:"Bearer "+t})});n({type:"FETCH_PLAYLIST_MENU_PENDING"}),fetch(a).then((function(e){return"Unauthorized"===e.statusText&&(window.location.href="./"),e.json()})).then((function(e){n({type:"FETCH_PLAYLIST_MENU_SUCCESS",playlists:e.items})})).catch((function(e){n({type:"FETCH_PLAYLIST_MENU_ERROR"})}))}},me=function(e,t,n){return function(a){var r=new Request("https://api.spotify.com/v1/users/".concat(e,"/playlists/").concat(t,"/tracks"),{headers:new Headers({Authorization:"Bearer "+n})});a({type:"FETCH_PLAYLIST_SONGS_PENDING"}),fetch(r).then((function(e){return e.json()})).then((function(e){e.items=D()(e.items,(function(e){return e.track.id})),a({type:"FETCH_PLAYLIST_SONGS_SUCCESS",songs:e.items})})).catch((function(e){a({type:"FETCH_PLAYLIST_SONGS_ERROR"})}))}},ye=function(e,t,n,a){return function(r){var s=new Request("https://api.spotify.com/v1/playlists/".concat(e,"/tracks"),{method:"PUT",headers:new Headers({Authorization:"Bearer "+t}),body:{range_start:n,insert_before:a}});r({type:"REORDER_PLAYLIST_TRACK_PENDING"}),fetch(s).then((function(e){r({type:"REORDER_PLAYLIST_TRACK_SUCCESS",songs:e})})).catch((function(e){r({type:"REORDER_PLAYLIST_TRACK_ERROR"})}))}},ge=Object(l.b)((function(e){return{userId:e.userReducer.user?e.userReducer.user.id:"",playlists:e.playlistReducer.playlists?e.playlistReducer.playlists:"",token:e.tokenReducer.token?e.tokenReducer.token:"",title:e.uiReducer.title}}),(function(e){return Object(i.b)({fetchPlaylistsMenu:de,fetchPlaylistSongs:me,updateHeaderTitle:W},e)}))(ue),he=(n(281),n(163)),fe=n(345),Ee=n(344),Se=n(340),ve=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(b.a)(this,Object(N.a)(t).call(this,e))).state={currentPlaylist:null,currentSongs:[]},n}return Object(C.a)(t,e),Object(R.a)(t,[{key:"componentWillUnmount",value:function(){this.props.clearSongs(),this.props.setSelectedSongs([])}},{key:"playSong",value:function(e){var t=this;if("GeneratePlaylist"===this.props.headerTitle){var n=[e.track.uri];this.props.playSpecificTrack(this.props.token,n,void 0,void 0)}else{console.log("playlist");var a=this.props.playlists.filter((function(e){return e.name===t.props.headerTitle}))[0];if(null===this.state.currentPlaylist||this.state.currentPlaylist.name!==a.name)this.setState({currentPlaylist:a},(function(){console.log(t.state.currentPlaylist.uri);var n=t.state.currentPlaylist.uri,a=e.track.uri;t.props.playSpecificTrack(t.props.token,void 0,a,n)}));else{var r=this.state.currentPlaylist.uri,s=e.track.uri;this.props.playSpecificTrack(this.props.token,void 0,s,r)}}}},{key:"msToMinutesAndSeconds",value:function(e){var t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return t+":"+(n<10?"0":"")+n}},{key:"renderSongs",value:function(){var e=this;return this.state.currentSongs!==this.props.songs&&this.setState({currentSongs:this.props.songs}),r.a.createElement(fe.a,null,r.a.createElement(Ee.a,{active:void 0!==this.props.isOrganizing&&this.props.isOrganizing},r.a.createElement(Se.a,{content:"Organizing..."})),r.a.createElement(he.a,{duration:600},this.state.currentSongs.map((function(t,n){var a=void 0!==e.props.currentPlayerState&&t.track.id===e.props.currentPlayerState.track_window.current_track.id?"fa-pause-circle-o greenText":"fa-play-circle-o";return r.a.createElement("li",{onClick:function(){e.props.setSelectedSongs([t])},className:t.track.id===e.props.songId?"active user-song-item greenText ".concat(a):"user-song-item",key:t.track.id},r.a.createElement("div",{onClick:function(){e.playSong(t)},className:"play-song"},r.a.createElement(re.a,{circular:!0,name:"play",inverted:!0,color:"grey",link:!0})),r.a.createElement("div",{className:"song-title"},r.a.createElement("p",{className:"".concat(a)},t.track.name)),r.a.createElement("div",{className:"song-artist"},r.a.createElement("p",{className:"".concat(a)},t.track.artists[0].name)),r.a.createElement("div",{className:"song-album"},r.a.createElement("p",{className:"".concat(a)},t.track.album.name)),r.a.createElement("div",{className:"song-added"},r.a.createElement("p",{className:"".concat(a)},ae()(t.added_at).format("YYYY-MM-DD"))),r.a.createElement("div",{className:"song-length"},r.a.createElement("p",{className:"".concat(a)},e.msToMinutesAndSeconds(t.track.duration_ms))))}))))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"song-header-container"},r.a.createElement("div",{className:"song-title-header"},r.a.createElement("p",null,"Title")),r.a.createElement("div",{className:"song-artist-header"},r.a.createElement("p",null,"Artist")),r.a.createElement("div",{className:"song-album-header"},r.a.createElement("p",null,"Album")),r.a.createElement("div",{className:"song-added-header"},r.a.createElement("i",{className:"fa fa-calendar-plus-o","aria-hidden":"true"})),r.a.createElement("div",{className:"song-length-header"},r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"}))),r.a.createElement("div",{className:"song-length-header"},r.a.createElement("p",null,r.a.createElement("i",{className:"fa fa-clock-o","aria-hidden":"true"})))),this.props.songs&&!this.props.fetchPlaylistSongsPending&&this.renderSongs())}}]),t}(a.Component),Pe=Object(l.b)((function(e){return{token:e.tokenReducer.token?e.tokenReducer.token:"",songs:e.songsReducer.songs?e.songsReducer.songs:"",fetchSongsError:e.songsReducer.fetchSongsError,fetchSongsPending:e.songsReducer.fetchSongsPending,fetchPlaylistSongsPending:e.songsReducer.fetchPlaylistSongsPending,songId:e.songsReducer.songId,songAddedId:e.userReducer.songId||"",viewType:e.songsReducer.viewType,headerTitle:e.uiReducer.title,playlists:e.playlistReducer.playlists,currentPlayerState:e.spotifyPlayerReducer.currentPlayerState,isOrganizing:e.playlistOrganizeReducer.isOrganizing}}),(function(e){return Object(i.b)({fetchSongs:z,setSelectedSongs:J,clearSongs:F,playSpecificTrack:G},e)}))(ve),_e=(n(296),n(297),n(343)),ke=n(175),Oe=function(e){function t(){return Object(T.a)(this,t),Object(b.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(R.a)(t,[{key:"componentWillReceiveProps",value:function(e){""!==e.userId&&""!==e.token&&this.props.fetchPlaylistsMenu(e.userId,e.token)}},{key:"renderPlaylists",value:function(){var e=this;if(""!==this.props.playlists)return this.props.playlists.map((function(t){return r.a.createElement(_e.a,{color:"grey",key:t.id,className:"card-main",onClick:function(){e.props.fetchPlaylistSongs(t.owner.id,t.id,e.props.token),e.props.updateHeaderTitle(t.name)}},r.a.createElement(ke.a,{src:t.images[0]?t.images[0].url:null}),r.a.createElement(_e.a.Content,null,r.a.createElement(_e.a.Header,null,t.name),r.a.createElement(_e.a.Description,null,t.description)))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(_e.a.Group,null,this.renderPlaylists()))}}]),t}(a.Component),Te=Object(l.b)((function(e){return{userId:e.userReducer.user?e.userReducer.user.id:"",playlists:e.playlistReducer.playlists?e.playlistReducer.playlists:"",token:e.tokenReducer.token?e.tokenReducer.token:"",title:e.uiReducer.title}}),(function(e){return Object(i.b)({fetchPlaylistsMenu:de,fetchPlaylistSongs:me,updateHeaderTitle:W,updateViewType:q},e)}))(Oe),Re=(n(304),n(305),n(342)),be=function(e){function t(){var e,n;Object(T.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(b.a)(this,(e=Object(N.a)(t)).call.apply(e,[this].concat(r)))).state={searchTerm:""},n.updateSearchTerm=function(e){n.setState({searchTerm:e.target.value})},n}return Object(C.a)(t,e),Object(R.a)(t,[{key:"renderSearch",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Search for songs to base your playlist off of!"),r.a.createElement(Re.a,{inverted:!0,onSubmit:function(){e.props.searchSongs(e.state.searchTerm,e.props.token)}},r.a.createElement(Re.a.Input,{onChange:this.updateSearchTerm,placeholder:"Search for a song..."})))}},{key:"render",value:function(){return r.a.createElement("div",{className:"track-search-container"},this.renderSearch())}}]),t}(a.Component),Ne=Object(l.b)((function(e){return{token:e.tokenReducer.token}}),(function(e){return Object(i.b)({searchSongs:Y},e)}))(be),Ce=function(e){function t(){return Object(T.a)(this,t),Object(b.a)(this,Object(N.a)(t).apply(this,arguments))}return Object(C.a)(t,e),Object(R.a)(t,[{key:"componentWillUnmount",value:function(){this.props.setSelectedSongs([])}},{key:"generatePlaylist",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Ne,null),0!=this.props.songs.length&&r.a.createElement(Pe,{checkBoxVisible:!0}))}}]),t}(a.Component),je=Object(l.b)((function(e){return{songs:e.songsReducer.songs?e.songsReducer.songs:"",selectedSongs:e.songsReducer.selectedSongs}}),(function(e){return Object(i.b)({setSelectedSongs:J},e)}))(Ce),Ae=function(e){var t=e.headerTitle,n=e.audioControl,a=e.resumeSong,s=e.pauseSong;return r.a.createElement("div",null,""===t?r.a.createElement(Te,null):"Home"===t?r.a.createElement(Te,null):"GeneratePlaylist"===t?r.a.createElement(je,null):r.a.createElement(Pe,{resumeSong:a,pauseSong:s,audioControl:n}))},we=Object(l.b)((function(e){return{headerTitle:e.uiReducer.title}}))(Ae),Ie=(n(327),function(e){return console.log("ARTWORK",e),r.a.createElement("div",{className:"album-artwork-container"},r.a.createElement("img",{className:"album-artwork",src:e.albumImage}))}),Le=Object(l.b)((function(e){return{albumImage:e.spotifyPlayerReducer.currentPlayerState?e.spotifyPlayerReducer.currentPlayerState.track_window.current_track.album.images[0].url:""}}))(Ie),He=n(30),Ge=(n(328),n(341)),Ue=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(b.a)(this,Object(N.a)(t).call(this,e))).generatePlaylistClick=n.generatePlaylistClick.bind(Object(He.a)(n)),n.addSongsToPlaylist=n.addSongsToPlaylist.bind(Object(He.a)(n)),n.state={name:"",size:0,nameError:!1,sizeError:!1},n}return Object(C.a)(t,e),Object(R.a)(t,[{key:"generatePlaylistClick",value:function(){""===this.state.name?this.setState({nameError:!0}):this.state.nameError&&this.setState({nameError:!1}),this.state.size<=0?this.setState({sizeError:!0}):this.state.sizeError&&this.setState({sizeError:!1}),this.state.sizeError||this.state.nameError||this.generatePlaylist()}},{key:"generatePlaylist",value:function(){var e=this,t=[],n=!0,a=!1,r=void 0;try{for(var s,o=this.props.selectedSongs[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var i=s.value;t.push(i.track.id)}}catch(c){a=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}fetch("http://localhost:8080/playlist/generate",{method:"POST",headers:{authorization:"Bearer ".concat(this.props.token),"Content-Type":"application/json"},body:JSON.stringify({access_token:this.props.token,ids:t,num_of_songs:this.state.size})}).then((function(t){t.json().then((function(t){e.createGeneratedPlaylist(t.generated_playlist_ids)}))}))}},{key:"createGeneratedPlaylist",value:function(e){var t=this,n=new Request("https://api.spotify.com/v1/users/".concat(this.props.userId,"/playlists"),{method:"POST",headers:new Headers({Authorization:"Bearer "+this.props.token,"Content-Type":"application/json"}),body:JSON.stringify({name:this.state.name})});fetch(n).then((function(e){return e.json()})).then((function(n){t.addSongsToPlaylist(e,n.id)}))}},{key:"addSongsToPlaylist",value:function(e,t){for(var n=this,a="",r=0;r<e.length;r++)r===e.length-1?a+="spotify:track:".concat(e[r]):a+="spotify:track:".concat(e[r],",");console.log(a);var s=new Request("https://api.spotify.com/v1/playlists/".concat(t,"/tracks?uris=").concat(a),{method:"POST",headers:new Headers({Authorization:"Bearer "+this.props.token,"Content-Type":"application/json"})});fetch(s).then((function(e){return e.json()})).then((function(e){console.log(e),n.addPlaylist(t)}))}},{key:"addPlaylist",value:function(e){var t=this,n=new Request("https://api.spotify.com/v1/playlists/".concat(e),{method:"GET",headers:new Headers({Authorization:"Bearer "+this.props.token,"Content-Type":"application/json"})});fetch(n).then((function(e){return e.json()})).then((function(n){console.log(n),t.props.addPlaylistItem(n),t.props.fetchPlaylistSongs(t.props.userId,e,t.props.token),t.props.updateHeaderTitle(t.state.name)}))}},{key:"selectSong",value:function(){return this.props.selectedSongs.length>0?r.a.createElement("div",null,r.a.createElement("div",{className:"playlist-title-container"},r.a.createElement("div",{className:"playlist-image-container"},r.a.createElement("img",{className:"playlist-image",src:this.props.selectedSongs[0].track.album.images[0]?this.props.selectedSongs[0].track.album.images[0].url:null})),r.a.createElement("div",{className:"playlist-info-container"},r.a.createElement("p",{className:"playlist-text"},"SELECTED SONG"),r.a.createElement("h3",{className:"header-title"},this.props.selectedSongs[0].track.name),r.a.createElement("p",{className:"created-by"},"Artist: ",r.a.createElement("span",{className:"lighter-text"},this.props.selectedSongs[0].track.artists[0].name)," ")))):r.a.createElement("div",null)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Generate Playlist"),r.a.createElement(Re.a,{inverted:!0},r.a.createElement(Re.a.Group,{widths:"equal"},r.a.createElement(Re.a.Field,{control:Ge.a,label:"Playlist Name",placeholder:"Playlist Name",error:this.state.nameError,onChange:function(t){return e.setState({name:t.target.value})}}),r.a.createElement(Re.a.Field,{control:Ge.a,label:"Playlist Size",type:"number",placeholder:"Playlist Size",error:this.state.sizeError,onChange:function(t){return e.setState({size:t.target.value})}})),this.props.selectedSongs.length>0&&r.a.createElement("div",null,r.a.createElement("label",null,"Seed Songs"),this.selectSong()),r.a.createElement("button",{onClick:this.generatePlaylistClick,className:"organize-btn"},"GENERATE")))}}]),t}(a.Component),De=Object(l.b)((function(e){return{token:e.tokenReducer.token,selectedSongs:e.songsReducer.selectedSongs,userId:e.userReducer.user?e.userReducer.user.id:""}}),(function(e){return Object(i.b)({searchSongs:Y,updateHeaderTitle:W,updateViewType:q,fetchPlaylistSongs:me,fetchPlaylistsMenu:de,addPlaylistItem:pe},e)}))(Ue),ze=(n(329),function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(b.a)(this,Object(N.a)(t).call(this,e))).organizePlaylist=function(){n.props.updateOrganizingState(!0),console.log("current playlist",n.state.currentPlaylist);for(var e=[],t=0;t<n.props.songs.length;t++)e.push(n.props.songs[t].track.id);fetch("http://localhost:8080/playlist/organize",{method:"POST",headers:{authorization:"Bearer ".concat(n.props.token),"Content-Type":"application/json"},body:JSON.stringify({access_token:n.props.token,ids:e})}).then((function(e){e.json().then((function(e){console.log("Parsed",e.ordered_ids),console.log(Object(He.a)(n)),n.reorderPlaylist(e.ordered_ids)}))}))},n.startPlaylist=function(){if(void 0!==n.props.currentPlayerState&&null!==n.state.currentPlaylist){console.log("currentPlaylist",n.state.currentPlaylist);var e=n.state.currentPlaylist.uri;n.props.playSpecificTrack(n.props.token,void 0,void 0,e)}},n.state={currentPlaylist:null},n}return Object(C.a)(t,e),Object(R.a)(t,[{key:"reorderPlaylist",value:function(e){for(var t=this,n=0;n<e.length;n++){for(var a=0,r=0;r<this.props.songs.length;r++)if(this.props.songs[r].track.id===e[n]){a=r;break}console.log("Original",a),console.log("new",n);var s=new Request("https://api.spotify.com/v1/playlists/".concat(this.state.currentPlaylist.id,"/tracks"),{method:"PUT",headers:new Headers({Authorization:"Bearer "+this.props.token,"Content-Type":"application/json"}),body:JSON.stringify({range_start:a,insert_before:n})});fetch(s).then((function(e){console.log("before",t.props.songs),e,t.props.fetchPlaylistSongs(t.state.currentPlaylist.owner.id,t.state.currentPlaylist.id,t.props.token),console.log("after",t.props.songs)}))}this.props.updateOrganizingState(!1),console.log("ORDERED!!!!")}},{key:"render",value:function(){var e=this;if("playlist"===this.props.viewType){var t=this.props.playlists.filter((function(t){return t.name===e.props.headerTitle}))[0];void 0===t||null!==this.state.currentPlaylist&&this.state.currentPlaylist.name===t.name||this.setState({currentPlaylist:t})}return r.a.createElement("div",{className:"section-title"},"Home"===this.props.headerTitle&&r.a.createElement("div",null,r.a.createElement("h3",null,"Your Library")),"GeneratePlaylist"===this.props.headerTitle&&r.a.createElement("div",null,r.a.createElement(De,null)),"playlist"===this.props.viewType&&null!==this.state.currentPlaylist&&r.a.createElement("div",{className:"playlist-title-container"},r.a.createElement("div",{className:"playlist-image-container"},r.a.createElement("img",{className:"playlist-image",src:this.state.currentPlaylist.images[0]?this.state.currentPlaylist.images[0].url:null})),r.a.createElement("div",{className:"playlist-info-container"},r.a.createElement("p",{className:"playlist-text"},"PLAYLIST"),r.a.createElement("h3",{className:"header-title"},this.props.headerTitle),r.a.createElement("p",{className:"created-by"},"Created By: ",r.a.createElement("span",{className:"lighter-text"},this.state.currentPlaylist.owner.display_name)," - ",this.state.currentPlaylist.tracks.total," songs"),r.a.createElement("button",{onClick:this.startPlaylist,className:"main-pause-play-btn"},"PLAY"),r.a.createElement("button",{onClick:this.organizePlaylist,className:"organize-btn"},"ORGANIZE"))))}}]),t}(a.Component)),Ye=function(e){return{type:"UPDATE_ORGANIZING_STATE",isOrganizing:e}},Fe=Object(l.b)((function(e){return{songPaused:e.songsReducer.songPaused,headerTitle:e.uiReducer.title,viewType:e.songsReducer.viewType,playlists:e.playlistReducer.playlists,token:e.tokenReducer.token,songs:e.songsReducer.songs,currentPlayerState:e.spotifyPlayerReducer.currentPlayerState}}),(function(e){return Object(i.b)({updateHeaderTitle:W,updateViewType:q,reorderPlaylistTrack:ye,fetchPlaylistSongs:me,playSpecificTrack:G,updateOrganizingState:Ye},e)}))(ze),xe=(n(330),function(e){var t=e.updateHeaderTitle,n=e.updateViewType;return r.a.createElement("ul",{className:"side-menu-container"},r.a.createElement("li",{className:"side-menu-item",onClick:function(){t("Home"),n("Home")}},r.a.createElement(re.a,{name:"home"}),r.a.createElement("h3",{className:"side-menu-title"},"Home")),r.a.createElement("li",{className:"side-menu-item",onClick:function(){t("GeneratePlaylist"),n("songs")}},r.a.createElement(re.a,{name:"random"}),r.a.createElement("h3",{className:"side-menu-title"},"Generate Playlist")))}),Me=Object(l.b)((function(e){return{title:e.uiReducer.title}}),(function(e){return Object(i.b)({updateViewType:q,updateHeaderTitle:W},e)}))(xe),Ve=function(e){function t(e){var n;return Object(T.a)(this,t),(n=Object(b.a)(this,Object(N.a)(t).call(this,e))).stopSong=function(){n.audio&&(n.props.stopSong(),n.audio.pause())},n.pauseSong=function(){n.audio&&(n.props.pauseSong(),n.audio.pause())},n.resumeSong=function(){n.audio&&(n.props.resumeSong(),n.audio.play())},n.audioControl=function(e){var t=n.props,a=t.playSong,r=t.stopSong;void 0===n.audio?(a(e.track),n.audio=new Audio(e.track.preview_url),n.audio.play()):(r(),n.audio.pause(),a(e.track),n.audio=new Audio(e.track.preview_url),n.audio.play())},n.state={spotifyPlayer:null,device_id:null,accessToken:null,firstAuth:!0,authenticated:!1},n.playerCheckInterval=null,n.player=null,n}return Object(C.a)(t,e),Object(R.a)(t,[{key:"componentDidMount",value:function(){var e,t,n=this;return O.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:void 0===(e=Q.a.parse(window.location.search)).access_token?(window.location="http://localhost:8080/",this.setState({authenticated:!0})):!1!==this.state.firstAuth&&(t=e.access_token,this.props.setToken(t),this.setState({accessToken:t,firstAuth:!1}),this.playerCheckInterval=setInterval((function(){return n.checkForPlayer()}),1e3)),this.props.updateHeaderTitle("Home");case 3:case"end":return a.stop()}}),null,this)}},{key:"checkForPlayer",value:function(){var e=this;if(void 0!==window.Spotify){clearInterval(this.playerCheckInterval),this.player=new window.Spotify.Player({name:"JustFlow",getOAuthToken:function(t){t(e.props.token)},volume:.5});var t=this;this.player.connect().then((function(n){n?(console.log("The Web Playback SDK successfully connected to Spotify!"),e.createEventHandlers(),t.setState({spotifyPlayer:e.player,device_id:e.player.device_id})):console.log("Uncessful connection")}))}}},{key:"transferPlaybackHere",value:function(){var e=this.state,t=e.device_id;e.token;console.log("state",this.state),fetch("https://api.spotify.com/v1/me/player",{method:"PUT",headers:{authorization:"Bearer ".concat(this.props.token),"Content-Type":"application/json"},body:JSON.stringify({device_ids:[t],play:!1})})}},{key:"startPlayer",value:function(){null!==this.state.spotifyPlayer&&(console.log(this.state.spotifyPlayer),this.state.spotifyPlayer.togglePlay().then((function(){console.log("PLAYING ")})))}},{key:"createEventHandlers",value:function(){var e=this;this.player.addListener("initialization_error",(function(e){console.error(e)})),this.player.addListener("authentication_error",(function(e){console.error(e)})),this.player.addListener("account_error",(function(e){console.error(e)})),this.player.addListener("playback_error",(function(e){console.error(e)})),this.player.addListener("player_state_changed",(function(t){console.log("state changed",t),e.props.updateCurrentPlayerState(t),e.props.increaseSongTime(t.position/1e3),e.player.getVolume().then((function(t){e.props.updateVolume(100*t)}))})),this.player.addListener("ready",(function(t){var n=t.device_id;e.props.updateSpotifyPlayer(e.player),e.setState({device_id:n},(function(){e.transferPlaybackHere()}))}))}},{key:"componentWillReceiveProps",value:function(e){e.token&&this.props.fetchUser(e.token),void 0!==this.audio&&(this.audio.volume=e.volume/100)}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"app-container"},r.a.createElement("div",{className:"left-side-section"},r.a.createElement(Me,null),r.a.createElement(ge,null),r.a.createElement(Le,null)),r.a.createElement("div",{className:"main-section"},r.a.createElement(te,null),r.a.createElement("div",{className:"main-section-container"},r.a.createElement(Fe,{pauseSong:this.pauseSong,resumeSong:this.resumeSong}),r.a.createElement(we,{pauseSong:this.pauseSong,resumeSong:this.resumeSong,audioControl:this.audioControl}))),r.a.createElement(le,{stopSong:this.stopSong,pauseSong:this.pauseSong,resumeSong:this.resumeSong,audioControl:this.audioControl})))}}]),t}(a.Component),Be=Object(l.b)((function(e){return{token:e.tokenReducer.token,volume:e.soundReducer.volume,spotifyPlayer:e.spotifyPlayerReducer.spotifyPlayer,currentPlayerState:A.a.object}}),(function(e){return Object(i.b)({fetchUser:w,setToken:I,playSong:x,stopSong:M,pauseSong:V,resumeSong:B,updateSpotifyPlayer:L,updateCurrentPlayerState:H,updateHeaderTitle:W,increaseSongTime:K,updateVolume:X},e)}))(Ve),Ke=Object(i.d)(_,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Object(i.a)(c.a));o.a.render(r.a.createElement(l.a,{store:Ke},r.a.createElement(Be,null)),document.getElementById("root"))}},[[187,1,2]]]);
//# sourceMappingURL=main.96069e87.chunk.js.map